= 新项目结构

分别包含如下分层

. daos 与数据库相关.
. services 服务相关, 业务核心逻辑, 真正执行业务的地方.
. business 目前暂无. 业务附加逻辑, 可被降级的部分. 如 支付成功发放京豆, 发放京豆就是支付中可被降级的部分.
. controllers 控制层, 项目与外界交互的输入输出层, 路由控制层.
  .. pb. rpc 相关.
  .. http. http 调用相关.

遵循 隐藏内部实现 原则, 项目对外只需暴露
1. dao层相关数据结构和接口.
2. 控制层 相关数据结构和接口.

原先暴露的是 service 相关的数据和接口, 但是我现在觉得, service 应是内部实现, 不必暴露.

项目与外界交互只应通过 http/grpc 等指定方式, 而不能通过调用svc.
好处是, 项目内可以随意更改自己的svc而不用考虑对别人的影响了. 坏处是项目外无法使用svc.

.daos 是有必要对外暴露的, 且好处大于坏处
1. 数据库结构本身结构稳定, 暴露后修改的可能性很低.
2. 业务逻辑间调用使用http等没问题, 但是部分数据统计/分析有可能需要数据表结构, 公开表结构可以减少此部分的代码重复率.
3. 方便其他模块使用该表. 有些情况下, 微服务A直接访问微服务B的表比rpc调用更好.

分层存在的问题:
不同层次需要使用不同的结构体, 会重复定义很多相似结构体, 也会增加很多不必要结构体转换.

微服务的问题
当项目简单时, 微服务会增加很多中转上消耗.
1. 转换到rpc所需结构体的性能消耗
2. 新项目从头开发, 增加了开发的复杂性.(单体应用只需要在一个项目内处理即可, 微服务化后需要修改多个项目, 凭空增加了复杂度)
