= 消息队列

消息队列作为中间件, 与直接调用服务相比有如下优点

. 同一条消息可以有不同业务产生, 也可以由不同业务消费
. 存储消息. 直接调用服务时, 如果服务不可用则消息就会丢失.
. 解耦生产者和消费者, 两者可以独立更新部署
. 添加生产者和消费者都比较简单快速

消息队列的使用场景有两种, __事件推送__ 和 __信息流__.

事件推送更注重实时性, 可靠性. 消费者收到事件后即进行处理, 没有回溯处理的场景.

消息流更注重吞吐量, 消费者可以随时从流中的某个位置消费数据. 以订单举例, 每产生一个订单,
就向消息流推送一个消息, 其他服务如对账, 通知推送等接收消息.

接下来, 我们可以讨论 kafka 和 rabbitmq 的区别了.

kafka 是典型的消息流, 吞吐量大, 随时可以回溯到某个位置重新消费数据.
而 rabbitmq 更注重可靠性, 功能更强(如类似的rocketmq实现了事务消息, rabbitmq 支持优先级队列)

kafka 更注重拉取消息, rabbitmq 更注重推送消息.

追求新技术的同学可以考虑下 Pulsar, 一个分布式的流式消息队列.

link:https://github.com/apache/pulsar[Pulsar github]

